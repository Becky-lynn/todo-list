<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

	<link rel="stylesheet" href="css/style.css">	

	<link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link href="https://fonts.googleapis.com/css2?family=Hachi+Maru+Pop&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/09fdc95a14.js" crossorigin="anonymous"></script>

	<title>My To-Do List</title>
</head>
<body>
 
 	<div class="container">

 	 <div class="row">
 	  <div class="col-sm-8 todo">
 	  	<div id="myDiv" class="header">
 	   <h1 class="header">Goals for the Day</h1>

 	   <!--<button id="clear-list" class="btn btn-secondary">Clear Tasks</button>-->

         </div>   	
      	<input id="new-task" type="text" placeholder="add item to list" />

      	<span id="add-task" class="addBtn">Add</span>
       <!--</div>-->

      <ul id="task-list"></ul>

       <button id="clear-list" class="btn btn-secondary">Clear Tasks</button>

     </div>
   <div>   	
  </div>
 </main>

	<script>

				var tasks = [];


		document.getElementById('add-task').addEventListener('click', addTask);

		document.getElementById("clear-list").addEventListener('click', function() {
			tasks = [];
			listTask();
		});


      //Create a new list item when clicking on the add button
		function addTask() {
          //new task is id from input tag 
            var li = document.createElement("li");
			var tasksValue = document.getElementById('new-task').value;
			var t = document.createTextNode(tasksValue);

			li.appendChild(t) ;


			if (tasksValue === "") {
              alert("You did not enter any items!")
			}
			else{
				tasks.push(tasksValue);
             //document.getElementById("task-list").appendChild(li);
				}
				listTask();
				document.getElementById('new-task').value = "";
			}
        



		function listTask() {
          //hook into ul
			let taskList = document.getElementById('task-list');

          //empty out
		    taskList.innerHTML = '';

            tasks.forEach(function(task) {

            let newTask = document.createElement('li');
//CHECKBOX
            let taskDone = document.createElement('input');

            taskDone.type = 'checkbox';

            //newTask.appendChild(taskDone);

            /*console.log(checkbox);*/
            taskDone.addEventListener('change', function(event) {

            	if (event.target.checked) {
                  event.target.nextSibling.classList.add('done');
            	}
                else{
                	event.target.nextSibling.classList.remove('done');
                	false;
                }

            });
         
//trash

          let taskText = document.createElement('span');
          taskText.classList.add('task-item');
          taskText.innerText = task;

          let taskRemove = document.createElement('button');
          //taskRemove.innerText = 'Remove';
          taskRemove.classList.add('btn');
          taskRemove.innerHTML = '<i class="fas fa-trash"></i>';

          taskRemove.addEventListener('click', removeTask);

          newTask.appendChild(taskDone);
          newTask.appendChild(taskText);
          newTask.appendChild(taskRemove);

          taskList.appendChild(newTask);

      });
     }     

       function removeTask(event) {
      console.log(event.target.previousSibling); 
            	tasks = tasks.filter(function(task) {

            		if (task == event.target.parentElement.previousSibling.innerText) {

            			return false;
            		}
            		else{
            			return true;
            		}
            });
//calling previous function
            listTask();
            }

	</script>
</body>
</html>